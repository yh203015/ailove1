<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ’— ç²‰è‰²æƒŠå–œ Â· å®Œç¾ç‰ˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            /* ç²‰è‰²æ¸å˜èƒŒæ™¯ */
            background: linear-gradient(145deg, #ffc0cb, #ffb6c1, #ff9eb5, #fba0a0);
            font-family: 'Microsoft YaHei', sans-serif;
            min-height: 100vh;
            overflow: hidden;
            position: relative;
        }

        /* ä¸»æƒŠå–œæŒ‰é’® - å±…ä¸­ */
        .main-btn {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #ff4d6d, #ff8e6e);
            color: white;
            border: none;
            padding: 18px 38px;
            border-radius: 60px;
            font-size: 1.6rem;
            font-weight: bold;
            letter-spacing: 2px;
            box-shadow: 0 10px 25px rgba(255, 77, 109, 0.5);
            cursor: pointer;
            transition: transform 0.2s;
            white-space: nowrap;
            z-index: 100;
        }
        .main-btn:hover {
            transform: translate(-50%, -50%) scale(1.05);
        }

        /* éŸ³ä¹å¼€å…³æŒ‰é’® - å›ºå®šåœ¨å³ä¸‹è§’ */
        .music-toggle {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: linear-gradient(135deg, #a4508b, #5f0a87);
            color: white;
            border: none;
            width: 70px;
            height: 70px;
            border-radius: 50%;
            font-size: 2.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 15px rgba(164, 80, 139, 0.5);
            cursor: pointer;
            transition: 0.2s;
            z-index: 200;
        }
        .music-toggle.on {
            background: linear-gradient(135deg, #3a9e5a, #6dd5a8);
        }
        .music-toggle:active {
            transform: scale(0.95);
        }

        /* çƒŸèŠ±ä¸Šå‡è½¨è¿¹ */
        .trail {
            position: absolute;
            width: 3px;
            height: 0;
            background: linear-gradient(to top, #fff, #ffdd99, transparent);
            border-radius: 2px;
            transform-origin: bottom center;
            animation: rise 1s ease-out forwards;
        }
        @keyframes rise {
            to { height: 70vh; opacity: 0; }
        }

        /* çƒŸèŠ±çˆ†ç‚¸ç²’å­ */
        .particle {
            position: absolute;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            opacity: 0;
            filter: blur(1px);
            animation: pop 1.2s ease-out forwards;
        }
        @keyframes pop {
            0% { opacity: 1; transform: scale(1) translate(0, 0); }
            100% { opacity: 0; transform: scale(0.5) translate(var(--tx), var(--ty)); }
        }

        /* æ°”æ³¡æƒ…è¯ - ä¿è¯æ–‡å­—å®Œæ•´æ¸…æ™°ï¼Œæ°”æ³¡ä¸å° */
        .bubble {
            position: absolute;
            background: rgba(255, 255, 255, 0.96);
            backdrop-filter: blur(4px);
            padding: 16px 32px;
            border-radius: 50px 50px 50px 10px;
            font-size: 1.4rem;
            color: #b34180;
            font-weight: 600;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2), 0 0 0 3px #ffb6c1;
            border: 1px solid #fff0f5;
            white-space: nowrap;
            opacity: 0;
            animation: floatMessage 6s ease-out forwards; /* æ›´æ…¢å‡ºç° */
            pointer-events: none;
            z-index: 150;
            max-width: 80vw;          /* è¶³å¤Ÿå®½ï¼Œä¿è¯æ–‡å­—æ˜¾ç¤º */
            overflow: visible;
            text-overflow: clip;
            line-height: 1.4;
        }
        @keyframes floatMessage {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.8);
            }
            10% {
                opacity: 1;
                transform: translate(calc(-50% + var(--tx)*0.1), calc(-50% + var(--ty)*0.1)) scale(1);
            }
            80% {
                opacity: 1;
                transform: translate(calc(-50% + var(--tx)), calc(-50% + var(--ty))) scale(1);
            }
            100% {
                opacity: 0;
                transform: translate(calc(-50% + var(--tx)*1.2), calc(-50% + var(--ty)*1.2)) scale(0.9);
            }
        }

        /* æç¤ºæ–‡å­—ï¼ˆå¯é€‰ï¼‰ */
        .hint {
            position: fixed;
            bottom: 120px;
            right: 40px;
            color: #8b3f5e;
            font-size: 0.9rem;
            background: rgba(255,255,255,0.4);
            padding: 4px 12px;
            border-radius: 20px;
            z-index: 180;
        }
    </style>
</head>
<body>
    <!-- ä¸»æƒŠå–œæŒ‰é’® -->
    <button class="main-btn" id="surpriseBtn">ğŸ’Œ ç‚¹æˆ‘ï¼Œæœ‰æƒŠå–œ</button>

    <!-- éŸ³ä¹å¼€å…³æŒ‰é’®ï¼ˆå³ä¸‹è§’ï¼‰ -->
    <button class="music-toggle" id="musicToggleBtn">ğŸ”‡</button>

    <!-- èƒŒæ™¯éŸ³ä¹ï¼ˆä½ ä¸Šä¼ çš„MP3ï¼‰ -->
    <audio id="bgMusic" loop preload="auto">
        <!-- å·²ä¸ºä½ æ„é€ å¥½ç›´é“¾ï¼Œç›´æ¥ä½¿ç”¨ -->
        <source src="https://raw.githubusercontent.com/yh203015/ailove1/08d05f1e035c869f590e0fcaa41ec6d98f53560d/Screenrecorder-2026-02-13-22-02-48-265-1.mp3" type="audio/mpeg">
    </audio>

    <!-- çˆ†ç‚¸éŸ³æ•ˆï¼ˆä½¿ç”¨ç¨³å®šåœ¨çº¿éŸ³æ•ˆï¼Œå§‹ç»ˆå¯æ’­æ”¾ï¼‰ -->
    <audio id="boomSound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-firework-explosion-2759.mp3" type="audio/mpeg">
    </audio>

    <script>
        (function() {
            // ----- è·å–å…ƒç´  -----
            const surpriseBtn = document.getElementById('surpriseBtn');
            const musicToggle = document.getElementById('musicToggleBtn');
            const bgMusic = document.getElementById('bgMusic');
            const boomSound = document.getElementById('boomSound');

            // ----- çŠ¶æ€å˜é‡ -----
            let isMusicEnabled = false;      // èƒŒæ™¯éŸ³ä¹å¼€å…³çŠ¶æ€
            let isSurpriseActive = false;     // é˜²æ­¢é‡å¤ç‚¹å‡»

            // ----- é…è‰²ä¸æƒ…è¯ (8æ¡) -----
            const colors = ['#FF4D6D', '#FF8E6E', '#A4508B', '#5F0A87', '#FF69B4', '#FF1493', '#DB7093', '#C71585'];
            const messages = [
                "ğŸ’– å…¶å®æˆ‘å–œæ¬¢ä½ å¾ˆä¹…äº†ã€‚",
                "âœ¨ ä¸æ˜¯ä¸€æ—¶å…´èµ·ï¼Œæ˜¯è®¤çœŸçš„å–œæ¬¢ã€‚",
                "ğŸŒ™ å–œæ¬¢å’Œä½ å¾…åœ¨ä¸€èµ·çš„æ¯ä¸€ç§’ã€‚",
                "ğŸµ ä½ å°±åƒä¸€é¦–å¬ä¸è…»çš„æ­Œã€‚",
                "ğŸŒˆ æœ‰ä½ åœ¨ï¼Œæ¯å¤©éƒ½æ˜¯æ™´å¤©ã€‚",
                "ğŸ€ é‡è§ä½ æ˜¯æœ€å¹¸è¿çš„äº‹ã€‚",
                "ğŸŒº æƒ³å’Œä½ ä¸€èµ·çœ‹éå››å­£ã€‚",
                "ğŸ’« ä½ æ˜¯æˆ‘å¿ƒé‡Œæœ€äº®çš„å…‰ã€‚"
            ];

            // ----- éŸ³ä¹å¼€å…³æŒ‰é’®é€»è¾‘ -----
            musicToggle.addEventListener('click', function(e) {
                e.stopPropagation();
                if (!isMusicEnabled) {
                    // å°è¯•è§£é”éŸ³é¢‘ï¼ˆæ’­æ”¾å¹¶æš‚åœï¼‰
                    bgMusic.play().then(() => {
                        bgMusic.pause();
                        bgMusic.currentTime = 0;
                        isMusicEnabled = true;
                        musicToggle.textContent = 'ğŸ”Š';
                        musicToggle.classList.add('on');
                    }).catch(err => {
                        console.warn('éŸ³é¢‘è§£é”å¤±è´¥ï¼Œä½†æ ‡è®°ä¸ºå¼€å¯', err);
                        isMusicEnabled = true;
                        musicToggle.textContent = 'ğŸ”Š';
                        musicToggle.classList.add('on');
                    });
                } else {
                    // å…³é—­éŸ³ä¹
                    bgMusic.pause();
                    bgMusic.currentTime = 0;
                    isMusicEnabled = false;
                    musicToggle.textContent = 'ğŸ”‡';
                    musicToggle.classList.remove('on');
                }
            });

            // ----- ä¸»æƒŠå–œæŒ‰é’® -----
            surpriseBtn.addEventListener('click', function() {
                if (isSurpriseActive) return;
                isSurpriseActive = true;

                // éšè—ä¸»æŒ‰é’®ï¼ˆéŸ³ä¹æŒ‰é’®ä¿ç•™ï¼‰
                surpriseBtn.style.display = 'none';

                // å¦‚æœéŸ³ä¹å·²å¼€å¯ï¼Œæ’­æ”¾èƒŒæ™¯éŸ³ä¹
                if (isMusicEnabled) {
                    bgMusic.play().catch(e => console.warn('èƒŒæ™¯éŸ³ä¹æ’­æ”¾å¤±è´¥', e));
                }

                // æ˜¾ç¤º8æ¡æƒ…è¯
                createBubbles();

                // è¿ç»­å‘å°„å‡ æšå¼€åœºçƒŸèŠ±
                for (let i = 0; i < 5; i++) {
                    setTimeout(() => launchFirework(), i * 400);
                }

                // è®¾ç½®å®šæ—¶å™¨ï¼Œæ¯2.2ç§’å‘å°„ä¸€æšçƒŸèŠ±
                setInterval(() => {
                    launchFirework();
                }, 2200);
            });

            // ----- å‘å°„çƒŸèŠ±ï¼ˆçˆ†ç‚¸éŸ³æ•ˆä¸å—å¼€å…³å½±å“ï¼Œå§‹ç»ˆæ’­æ”¾ï¼‰-----
            function launchFirework() {
                const startX = Math.random() > 0.5 ? 30 : window.innerWidth - 30;
                const startY = window.innerHeight - 40;
                const explodeX = startX + (Math.random() - 0.5) * 600;
                const explodeY = window.innerHeight * 0.2 + Math.random() * 200;

                // ä¸Šå‡è½¨è¿¹
                const trail = document.createElement('div');
                trail.classList.add('trail');
                trail.style.left = startX + 'px';
                trail.style.bottom = '30px';
                document.body.appendChild(trail);

                // ä¸Šå‡ç»“æŸåçˆ†ç‚¸
                setTimeout(() => {
                    trail.remove();
                    explode(explodeX, explodeY);

                    // æ’­æ”¾çˆ†ç‚¸éŸ³æ•ˆï¼ˆå§‹ç»ˆæ’­æ”¾ï¼Œä¸å—å¼€å…³å½±å“ï¼‰
                    const boomClone = boomSound.cloneNode(true);
                    boomClone.volume = 0.5;
                    boomClone.play().catch(e => console.log('çˆ†ç‚¸éŸ³æ•ˆæ’­æ”¾å¤±è´¥', e));
                    setTimeout(() => boomClone.remove(), 3000);
                }, 1000);
            }

            // ----- çˆ†ç‚¸ç²’å­æ•ˆæœ -----
            function explode(centerX, centerY) {
                const particleCount = 130;
                for (let i = 0; i < particleCount; i++) {
                    const angle = Math.random() * Math.PI * 2;
                    const velocity = 100 + Math.random() * 250;
                    const tx = Math.cos(angle) * velocity * (0.6 + Math.random() * 0.6);
                    const ty = Math.sin(angle) * velocity * (0.6 + Math.random() * 0.6);

                    const particle = document.createElement('div');
                    particle.classList.add('particle');
                    particle.style.left = centerX + 'px';
                    particle.style.top = centerY + 'px';
                    particle.style.background = colors[Math.floor(Math.random() * colors.length)];
                    particle.style.setProperty('--tx', tx + 'px');
                    particle.style.setProperty('--ty', ty + 'px');
                    particle.style.width = (4 + Math.random() * 6) + 'px';
                    particle.style.height = particle.style.width;

                    document.body.appendChild(particle);

                    setTimeout(() => {
                        if (particle.parentNode) particle.remove();
                    }, 1200);
                }
            }

            // ----- ç”Ÿæˆ8æ¡æƒ…è¯æ°”æ³¡ï¼ˆç¼“æ…¢å‡ºç°ï¼Œä¿è¯æ–‡å­—å®Œæ•´ï¼‰-----
            function createBubbles() {
                // 8ä¸ªæ–¹å‘åç§»é‡ï¼Œç¡®ä¿æ°”æ³¡æ•£å¼€ä¸”ä¸å®Œå…¨é®æŒ¡
                const positions = [
                    {tx: -280, ty: -200}, // å·¦ä¸Š
                    {tx: 280, ty: -200},  // å³ä¸Š
                    {tx: 0, ty: -300},    // ä¸Š
                    {tx: -240, ty: 200},  // å·¦ä¸‹
                    {tx: 240, ty: 200},   // å³ä¸‹
                    {tx: 0, ty: 280},     // ä¸‹
                    {tx: -160, ty: -100}, // å·¦ä¸­ä¸Š
                    {tx: 160, ty: 100}    // å³ä¸­ä¸‹
                ];

                messages.forEach((msg, index) => {
                    const bubble = document.createElement('div');
                    bubble.classList.add('bubble');
                    bubble.textContent = msg;
                    bubble.style.left = '50%';
                    bubble.style.top = '50%';

                    // å¾®è°ƒåç§»ï¼Œè®©ä½ç½®æ›´è‡ªç„¶
                    let pos = positions[index % positions.length];
                    const randomOffsetX = (Math.random() - 0.5) * 40;
                    const randomOffsetY = (Math.random() - 0.5) * 40;
                    bubble.style.setProperty('--tx', (pos.tx + randomOffsetX) + 'px');
                    bubble.style.setProperty('--ty', (pos.ty + randomOffsetY) + 'px');

                    // å»¶è¿Ÿä¾æ¬¡å‡ºç°ï¼Œæ›´æ…¢ä¸€äº›
                    bubble.style.animationDelay = (index * 0.6) + 's';

                    document.body.appendChild(bubble);

                    // 10ç§’åç§»é™¤æ°”æ³¡
                    setTimeout(() => {
                        if (bubble.parentNode) bubble.remove();
                    }, 10000);
                });
            }
        })();
    </script>
</body>
</html>