<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ’¥ ç»™ä½ çš„æƒŠå–œ </title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            background: linear-gradient(145deg, #0a0a1f, #1e1a3a);
            font-family: 'Microsoft YaHei', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow: hidden;
            position: relative;
        }

        /* æŒ‰é’®å®¹å™¨ - ç”¨äºç²¾ç¡®å®šä½ */
        .button-panel {
            position: relative;
            z-index: 50;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            transform: translateX(15vw); /* å°†æ•´ä¸ªæŒ‰é’®ç»„å‘å³ç§»åŠ¨ */
        }

        /* ä¸»æƒŠå–œæŒ‰é’® - ä¿æŒåŸæ · */
        .main-btn {
            background: linear-gradient(135deg, #ff5e7c, #ff9f4b);
            color: white;
            border: none;
            padding: 18px 38px;
            border-radius: 60px;
            font-size: 1.6rem;
            font-weight: bold;
            letter-spacing: 2px;
            box-shadow: 0 10px 25px rgba(255, 94, 124, 0.5);
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            white-space: nowrap;
        }
        .main-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 15px 30px rgba(255, 94, 124, 0.7);
        }

        /* éŸ³ä¹å¼€å…³æŒ‰é’® - å˜å°åˆ°çº¦1/4ï¼Œæ”¾åœ¨å±å¹•ä¸­é—´åå³ */
        .music-toggle {
            background: linear-gradient(135deg, #6e45e2, #88d3ce);
            color: white;
            border: none;
            width: 70px;          /* å›ºå®šå®½åº¦ï¼Œçº¦ä¸ºåŸæ¥çš„1/4å¤§å° */
            height: 70px;          /* å›ºå®šé«˜åº¦ï¼Œåšæˆåœ†å½¢ */
            border-radius: 50%;     /* åœ†å½¢æŒ‰é’® */
            font-size: 2.2rem;      /* æ”¾å¤§éŸ³ä¹ç¬¦å· */
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 15px rgba(110, 69, 226, 0.5);
            cursor: pointer;
            transition: 0.2s;
            line-height: 1;
            padding: 0;
            margin-left: 30px;      /* ä¸ä¸»æŒ‰é’®æ‹‰å¼€è·ç¦» */
        }
        .music-toggle.on {
            background: linear-gradient(135deg, #3a9e5a, #6dd5a8);
            box-shadow: 0 5px 15px rgba(58, 158, 90, 0.6);
        }
        .music-toggle:active {
            transform: scale(0.95);
        }

        /* çƒŸèŠ±å…ƒç´ æ ·å¼ */
        .trail {
            position: absolute;
            width: 3px;
            height: 0;
            background: linear-gradient(to top, #fff, #ffdd99, transparent);
            border-radius: 2px;
            transform-origin: bottom center;
            animation: rise 1s ease-out forwards; /* ä¸Šå‡æ—¶é—´ç¼©çŸ­åˆ°1ç§’ */
        }
        @keyframes rise {
            to { height: 70vh; opacity: 0; }
        }

        .particle {
            position: absolute;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            opacity: 0;
            filter: blur(1px);
            animation: pop 1.2s ease-out forwards; /* çˆ†ç‚¸åŠ¨ç”»æ—¶é—´ç¨é•¿ä¸€ç‚¹ï¼Œæ›´èˆ’å±• */
        }
        @keyframes pop {
            0% { opacity: 1; transform: scale(1) translate(0, 0); }
            100% { opacity: 0; transform: scale(0.5) translate(var(--tx), var(--ty)); }
        }

        /* æ°”æ³¡æƒ…è¯ - æœ€å¤šé®æŒ¡1/4çš„è®¾è®¡ */
        .bubble {
            position: absolute;
            background: rgba(255, 255, 255, 0.92);
            backdrop-filter: blur(5px);
            padding: 14px 28px;
            border-radius: 40px 40px 40px 8px; /* æŸ”å’Œçš„æ°”æ³¡å½¢çŠ¶ */
            font-size: 1.3rem;
            color: #1e1a3a;
            font-weight: 500;
            box-shadow: 0 10px 20px rgba(0,0,0,0.2), 0 0 0 2px rgba(255,215,0,0.3);
            border: 1px solid rgba(255,255,240,0.7);
            white-space: nowrap;
            opacity: 0;
            animation: floatMessage 3s ease-out forwards;
            pointer-events: none;
            z-index: 100;
            /* ç¡®ä¿æ°”æ³¡ä¸ä¼šå®Œå…¨é®æŒ¡è§†çº¿ï¼Œæœ€å¤šå æ®1/4å±å¹• */
            max-width: 40vw;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        @keyframes floatMessage {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.6);
            }
            20% {
                opacity: 1;
                transform: translate(calc(-50% + var(--tx)*0.3), calc(-50% + var(--ty)*0.3)) scale(1.1);
            }
            80% {
                opacity: 1;
                transform: translate(calc(-50% + var(--tx)), calc(-50% + var(--ty))) scale(1);
            }
            100% {
                opacity: 0;
                transform: translate(calc(-50% + var(--tx)*1.2), calc(-50% + var(--ty)*1.2)) scale(0.8);
            }
        }

        .hint {
            color: rgba(255,255,255,0.6);
            font-size: 0.9rem;
            margin-top: 8px;
        }
    </style>
</head>
<body>
    <div class="button-panel">
        <button class="main-btn" id="surpriseBtn">ğŸ’Œ ç‚¹æˆ‘ï¼Œæœ‰æƒŠå–œ</button>
        <button class="music-toggle" id="musicToggleBtn">ğŸ”‡</button>
    </div>

    <!-- éŸ³é¢‘å…ƒç´  -->
    <audio id="bgMusic" loop preload="auto">
        <!-- !!! è¯·åŠ¡å¿…æ›¿æ¢ä¸‹é¢çš„é“¾æ¥ä¸ºä½ ä» Raw æŒ‰é’®è·å–çš„ç›´é“¾ !!! -->
        <source src="https://raw.githubusercontent.com/yh203015/ailove1/08d05f1e035c869f590e0fcaa41ec6d98f53560d/Screenrecorder-2026-02-13-22-02-48-265-1.mp3" type="audio/mpeg">
    </audio>
    <audio id="boomSound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-firework-explosion-2759.mp3" type="audio/mpeg">
    </audio>

    <script>
        (function() {
            // ----- è·å–å…ƒç´  -----
            const surpriseBtn = document.getElementById('surpriseBtn');
            const musicToggle = document.getElementById('musicToggleBtn');
            const bgMusic = document.getElementById('bgMusic');
            const boomSound = document.getElementById('boomSound');

            // ----- çŠ¶æ€å˜é‡ -----
            let isMusicEnabled = false;      // éŸ³ä¹å¼€å…³çŠ¶æ€
            let isSurpriseActive = false;     // é˜²æ­¢é‡å¤ç‚¹å‡»

            // ----- é…è‰²ä¸æƒ…è¯ (8æ¡) -----
            const colors = ['#FF5E7C', '#FFD93D', '#6E45E2', '#4ECDC4', '#FF9F4B', '#A06CD5', '#F56EB3', '#5D9B9B'];
            const messages = [
                "ğŸ’– å…¶å®æˆ‘å–œæ¬¢ä½ å¾ˆä¹…äº†ã€‚",
                "âœ¨ ä¸æ˜¯ä¸€æ—¶å…´èµ·ï¼Œæ˜¯è®¤çœŸçš„å–œæ¬¢ã€‚",
                "ğŸŒ™ å–œæ¬¢å’Œä½ å¾…åœ¨ä¸€èµ·çš„æ¯ä¸€ç§’ã€‚",
                "ğŸµ ä½ å°±åƒä¸€é¦–å¬ä¸è…»çš„æ­Œã€‚",
                "ğŸŒˆ æœ‰ä½ åœ¨ï¼Œæ¯å¤©éƒ½æ˜¯æ™´å¤©ã€‚",
                "ğŸ€ é‡è§ä½ æ˜¯æœ€å¹¸è¿çš„äº‹ã€‚",
                "ğŸŒº æƒ³å’Œä½ ä¸€èµ·çœ‹éå››å­£ã€‚",
                "ğŸ’« ä½ æ˜¯æˆ‘å¿ƒé‡Œæœ€äº®çš„å…‰ã€‚"
            ];

            // ----- éŸ³ä¹å¼€å…³æŒ‰é’®é€»è¾‘ -----
            musicToggle.addEventListener('click', function(e) {
                e.stopPropagation();
                if (!isMusicEnabled) {
                    // å¼€å¯éŸ³ä¹ï¼šå°è¯•æ’­æ”¾å¹¶ç«‹å³æš‚åœï¼Œä»¥è§£é”éŸ³é¢‘ + é¢„åŠ è½½
                    bgMusic.play().then(() => {
                        bgMusic.pause();
                        bgMusic.currentTime = 0;
                        isMusicEnabled = true;
                        musicToggle.textContent = 'ğŸ”Š';
                        musicToggle.classList.add('on');
                        console.log('éŸ³ä¹å·²è§£é”ï¼Œéšæ—¶å¯ä»¥æ’­æ”¾');
                    }).catch(err => {
                        console.warn('éŸ³é¢‘è§£é”å¤±è´¥ï¼Œç‚¹å‡»æƒŠå–œæŒ‰é’®æ—¶ä¼šå†è¯•', err);
                        // å³ä½¿å¤±è´¥ï¼Œä¹Ÿæ ‡è®°ä¸ºå°è¯•å¼€å¯ï¼Œè®©æƒŠå–œæŒ‰é’®å†è¯•
                        isMusicEnabled = true; 
                        musicToggle.textContent = 'ğŸ”Š';
                        musicToggle.classList.add('on');
                    });
                } else {
                    // å…³é—­éŸ³ä¹ï¼šåœæ­¢æ‰€æœ‰éŸ³ä¹å¹¶é‡ç½®çŠ¶æ€
                    bgMusic.pause();
                    bgMusic.currentTime = 0;
                    isMusicEnabled = false;
                    musicToggle.textContent = 'ğŸ”‡';
                    musicToggle.classList.remove('on');
                }
            });

            // ----- ä¸»æƒŠå–œæŒ‰é’® -----
            surpriseBtn.addEventListener('click', function() {
                if (isSurpriseActive) return; // é˜²æ­¢è¿ç‚¹
                isSurpriseActive = true;

                // éšè—æŒ‰é’®ç»„ï¼ˆå¯ä»¥ä¿ç•™éŸ³ä¹æŒ‰é’®ï¼Ÿæ ¹æ®è¦æ±‚ï¼ŒéŸ³ä¹æŒ‰é’®ä¸€ç›´å­˜åœ¨ï¼Œæ‰€ä»¥åªéšè—ä¸»æŒ‰é’®å’Œæç¤ºï¼‰
                surpriseBtn.style.display = 'none';
                // æ³¨æ„ï¼šæˆ‘ä»¬ä¸ç§»é™¤éŸ³ä¹æŒ‰é’®ï¼Œè®©å®ƒä¿æŒåœ¨åŸä½

                // æ’­æ”¾èƒŒæ™¯éŸ³ä¹ï¼ˆå¦‚æœå·²å¼€å¯ï¼‰
                if (isMusicEnabled) {
                    bgMusic.play().catch(e => console.warn('èƒŒæ™¯éŸ³ä¹æ’­æ”¾å¤±è´¥', e));
                }

                // æ˜¾ç¤º8æ¡æƒ…è¯æ°”æ³¡
                createBubbles();

                // å¿«é€Ÿè¿ç»­å‘å°„å‡ æšçƒŸèŠ±ä½œä¸ºå¼€åœºï¼ˆé€Ÿåº¦åŠ å¿«ï¼‰
                for (let i = 0; i < 5; i++) {
                    setTimeout(() => launchFirework(), i * 400); // 400msä¸€å‘
                }

                // è®¾ç½®å®šæ—¶å™¨ï¼Œæ¯2.2ç§’å‘å°„ä¸€æšçƒŸèŠ±ï¼ˆæ¯”ä¹‹å‰å¿«ï¼Œä½†ä¸è¿‡åˆ†ï¼‰
                const interval = setInterval(() => {
                    launchFirework();
                }, 2200);

                // å¯é€‰ï¼šä¸€æ®µæ—¶é—´åæ¸…é™¤å®šæ—¶å™¨ï¼Œé¿å…æ— é™ï¼ˆæ¯”å¦‚2åˆ†é’Ÿåï¼‰ï¼Œè¿™é‡Œä¿ç•™
            });

            // ----- å‘å°„çƒŸèŠ±ï¼ˆè°ƒæ•´äº†é€Ÿåº¦å‚æ•°ï¼‰-----
            function launchFirework() {
                const startX = Math.random() > 0.5 ? 30 : window.innerWidth - 30;
                const startY = window.innerHeight - 40;
                const explodeX = startX + (Math.random() - 0.5) * 600;
                const explodeY = window.innerHeight * 0.2 + Math.random() * 200;

                // ä¸Šå‡è½¨è¿¹
                const trail = document.createElement('div');
                trail.classList.add('trail');
                trail.style.left = startX + 'px';
                trail.style.bottom = '30px';
                document.body.appendChild(trail);

                // ä¸Šå‡ç»“æŸåçˆ†ç‚¸
                setTimeout(() => {
                    trail.remove();
                    explode(explodeX, explodeY);
                    
                    // æ’­æ”¾çˆ†ç‚¸éŸ³æ•ˆ
                    if (isMusicEnabled) { // å¦‚æœç”¨æˆ·å¼€å¯äº†éŸ³ä¹å¼€å…³ï¼Œå°±è¿çˆ†ç‚¸éŸ³æ•ˆä¸€èµ·æ’­æ”¾
                        const boomClone = boomSound.cloneNode(true);
                        boomClone.volume = 0.45;
                        boomClone.play().catch(e => {});
                        setTimeout(() => boomClone.remove(), 3000);
                    }
                }, 1000); // ä¸Šå‡1ç§’åçˆ†ç‚¸ï¼ˆä¸åŠ¨ç”»åŒ¹é…ï¼‰
            }

            // ----- çˆ†ç‚¸ç²’å­æ•ˆæœ -----
            function explode(centerX, centerY) {
                const particleCount = 130;
                for (let i = 0; i < particleCount; i++) {
                    const angle = Math.random() * Math.PI * 2;
                    const velocity = 100 + Math.random() * 250;
                    const tx = Math.cos(angle) * velocity * (0.6 + Math.random() * 0.6);
                    const ty = Math.sin(angle) * velocity * (0.6 + Math.random() * 0.6);

                    const particle = document.createElement('div');
                    particle.classList.add('particle');
                    particle.style.left = centerX + 'px';
                    particle.style.top = centerY + 'px';
                    particle.style.background = colors[Math.floor(Math.random() * colors.length)];
                    particle.style.setProperty('--tx', tx + 'px');
                    particle.style.setProperty('--ty', ty + 'px');
                    particle.style.width = (4 + Math.random() * 6) + 'px';
                    particle.style.height = particle.style.width;
                    
                    document.body.appendChild(particle);

                    setTimeout(() => {
                        if (particle.parentNode) particle.remove();
                    }, 1200);
                }
            }

            // ----- ç”Ÿæˆ8æ¡æƒ…è¯æ°”æ³¡ï¼ˆä»ä¸­å¿ƒæ•£å¼€ï¼Œä¸”æœ‰é®æŒ¡æ§åˆ¶ï¼‰-----
            function createBubbles() {
                // ç”Ÿæˆ8ä¸ªæ–¹å‘ï¼Œç¡®ä¿å®ƒä»¬æ•£å¼€ä½†ä¸ä¼šå®Œå…¨é®æŒ¡ä¸­å¤®
                const positions = [
                    {tx: -260, ty: -180}, // å·¦ä¸Š
                    {tx: 260, ty: -180},  // å³ä¸Š
                    {tx: 0, ty: -280},    // ä¸Š
                    {tx: -220, ty: 180},  // å·¦ä¸‹
                    {tx: 220, ty: 180},   // å³ä¸‹
                    {tx: 0, ty: 260},     // ä¸‹
                    {tx: -140, ty: -80},  // å·¦ä¸­ä¸Šï¼ˆè¾ƒè¿‘ï¼‰
                    {tx: 140, ty: 80}     // å³ä¸­ä¸‹ï¼ˆè¾ƒè¿‘ï¼‰
                ];

                messages.forEach((msg, index) => {
                    const bubble = document.createElement('div');
                    bubble.classList.add('bubble');
                    bubble.textContent = msg;
                    bubble.style.left = '50%';
                    bubble.style.top = '50%';
                    
                    // éšæœºå¾®è°ƒåç§»é‡ï¼Œè®©æ°”æ³¡çœ‹èµ·æ¥æ›´è‡ªç„¶ï¼ŒåŒæ—¶ç¡®ä¿ä¸å¤ªé®æŒ¡
                    let pos = positions[index % positions.length];
                    // å¯¹éƒ¨åˆ†æ°”æ³¡å¢åŠ éšæœºå°åç§»ï¼Œé¿å…å®Œå…¨å¯¹ç§°
                    const randomOffsetX = (Math.random() - 0.5) * 40;
                    const randomOffsetY = (Math.random() - 0.5) * 40;
                    bubble.style.setProperty('--tx', (pos.tx + randomOffsetX) + 'px');
                    bubble.style.setProperty('--ty', (pos.ty + randomOffsetY) + 'px');
                    
                    // å»¶è¿Ÿä¾æ¬¡å‡ºç°
                    bubble.style.animationDelay = (index * 0.25) + 's';
                    
                    document.body.appendChild(bubble);

                    // 8ç§’åç§»é™¤æ°”æ³¡ï¼Œé¿å…å¤ªå¤šæ®‹ç•™
                    setTimeout(() => {
                        if (bubble.parentNode) bubble.remove();
                    }, 8000);
                });
            }

            // é¡µé¢å…³é—­å‰æ¸…ç†å®šæ—¶å™¨ï¼ˆå¯é€‰ï¼‰
            window.addEventListener('beforeunload', function() {
                // å¦‚æœæœ‰intervaléœ€è¦æ¸…ç†ï¼Œå¯ä»¥ç”¨å˜é‡ä¿å­˜ï¼Œè¿™é‡Œç•¥
            });
        })();
    </script>
</body>
</html>